<section class="flex lg:py-32 py-20 bg-brand text-white" id="contacto">
  <dii
    class="lg:max-w-7xl m-auto flex flex-col lg:flex-row lg:gap-24 gap-16 max-w-xl md:px-10 px-5"
  >
    <div class="lg:w-1/2 w-full flex flex-col gap-10 animation">
      <div class="lg:text-left text-center">
        <h3 class="lg:text-5xl md:text-4xl text-3xl font-semibold md:mb-8 mb-4">
          ¿Querés llevar tu marca al siguiente nivel?
        </h3>
        <p class="md:text-2xl text-xl">
          Estamos listos para impulsar tu marca en todos tus canales digitales.
          Contactanos para concretar una reunión y comenzar a escalar tus
          campañas.
        </p>
      </div>
      <div class="flex flex-col items-center lg:items-start">
        <a href="https://wa.me/5491168501519" target="_blank">
          <button
            class="bg-assent py-3 px-8 rounded-2xl text-dark text-xl font-semibold mb-6 hover:bg-assent/80 transition cursor-pointer"
          >
            Escribinos por Whatsapp
          </button>
        </a>
        <p class="text-center lg:text-left">
          Respuesta inmediata • Consulta gratuita • Sin compromiso
        </p>
      </div>
    </div>
    <div class="lg:w-1/2 w-full flex justify-center items-center animation">
      <form
        id="contactForm"
        action="https://formsubmit.co/damian@somos-fusion.com"
        method="POST"
        target="hidden_iframe"
        class="w-full max-w-2xl flex flex-col gap-6 text-white"
      >
        <!-- Campos ocultos de configuración FormSubmit -->
        <input
          type="hidden"
          name="_subject"
          value="Nuevo mensaje desde el sitio web"
        />
        <input type="hidden" name="_captcha" value="false" />
        <input type="hidden" name="_template" value="table" />
        <input type="hidden" name="_next" value="https://una.edu.ar/" />

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input
            type="text"
            name="name"
            placeholder="Nombre"
            required
            class="bg-[#806FE7] w-full p-4 rounded-4xl placeholder-white/70 focus:outline-none"
          />
          <input
            type="email"
            name="email"
            placeholder="Email"
            required
            class="bg-[#806FE7] w-full p-4 rounded-4xl placeholder-white/70 focus:outline-none"
          />
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input
            type="text"
            name="company"
            placeholder="Empresa"
            class="bg-[#806FE7] w-full p-4 rounded-4xl placeholder-white/70 focus:outline-none"
          />
          <div class="flex gap-4">
            <input
              type="tel"
              name="prefix"
              value="+54"
              readonly
              class="bg-[#806FE7] p-4 rounded-4xl text-center placeholder-white/70 focus:outline-none md:col-span-1 w-20"
            />
            <input
              type="tel"
              name="phone"
              placeholder="Teléfono"
              class="bg-[#806FE7] w-full p-4 rounded-4xl placeholder-white/70 focus:outline-none md:col-span-1"
            />
          </div>
        </div>

        <textarea
          name="message"
          placeholder="Contanos sobre tu proyecto..."
          rows="5"
          class="bg-[#806FE7] w-full h-60 p-4 rounded-4xl placeholder-white/70 focus:outline-none resize-none px-8 py-6"
        ></textarea>

        <button
          type="submit"
          class="bg-white text-black font-semibold text-lg py-4 rounded-2xl hover:bg-gray-100 transition cursor-pointer"
        >
          Enviar mensaje
        </button>

        <!-- Mensaje de confirmación -->
        <p id="formMessage" class="text-center text-lg mt-4 hidden"></p>
      </form>

      <!-- iframe oculto para enviar sin recargar -->
      <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"
      ></iframe>
    </div>
  </dii>
</section>

<script>
  const form = document.getElementById("contactForm") as HTMLFormElement;
  const message = document.getElementById("formMessage");

  form.addEventListener("submit", () => {
    if (!message) return;

    // Esperamos un momento para que el POST se envíe
    setTimeout(() => {
      message.textContent = "✅ ¡Mensaje enviado con éxito!";
      message.style.display = "block";
      message.style.color = "#00ff7f"; // verde
      form.reset();
    }, 800);
  });
</script>
